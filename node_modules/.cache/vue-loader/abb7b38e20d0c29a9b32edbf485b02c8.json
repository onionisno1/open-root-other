{"remainingRequest":"E:\\yhc\\open-root-other\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yhc\\open-root-other\\src\\f-hls\\live\\Live.vue?vue&type=style&index=0&id=69c77382&scoped=true&lang=scss&","dependencies":[{"path":"E:\\yhc\\open-root-other\\src\\f-hls\\live\\Live.vue","mtime":1590488802151},{"path":"E:\\yhc\\open-root-other\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaGxzLWxpdmUgewogIGJhY2tncm91bmQ6ICMzMzM7Cn0KLmhscy1saXZlIHZpZGVvIHsKICBkaXNwbGF5OiBibG9jazsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7Cn0KLnBsYXktbWFzayB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKICBjb2xvcjogI2ZmZjsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwp9Ci5wbGF5LXRpcCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGZvbnQtc2l6ZTogMThweDsKICB0b3A6IDUwJTsKICBsZWZ0OiA1MCU7CiAgbWFyZ2luOiAtMzhweCAtMzZweDsKfQoucGxheS1pY29uIHsKICBwYWRkaW5nLWJvdHRvbTogNXB4OwogIGZvbnQtc2l6ZTogMmVtOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYm9yZGVyLXJhZGl1czogMTAwJTsKfQo="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live.vue","sourceRoot":"src/f-hls/live","sourcesContent":["<template>\n  <div class=\"hls-live pin-wrap\">\n    <video v-if=\"playing\" ref=\"live\" autoplay :src=\"playUrl\" controls playsinline></video>\n    <div v-else class=\"play-mask\" @click=\"doPlay\">\n      <div class=\"play-tip\">\n        <div class=\"play-icon\"><v-icon name=\"play\" /></div>\n        <div class=\"play-text\">点击播放</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Hls from 'hls.js'\n\nexport default {\n  name: 'Live',\n  data() {\n    return {\n      playing: false,\n      playUrl: '',\n      hls: null\n    }\n  },\n  created() {\n    // Get hls live url from router query.\n    let encodedHlsUrl = this.$router.currentRoute.query.url\n    if (typeof encodedHlsUrl === 'string' && encodedHlsUrl !== '') {\n      this.playUrl = decodeURIComponent(encodedHlsUrl)\n    }\n  },\n  beforeDestroy () {\n    if (this.playing) {\n      this.$refs.live.pause()\n      this.hls.destroy()\n    }\n  },\n  methods: {\n    doPlay () {\n      if (this.playUrl === '') {\n        return\n      }\n      if (!this.playing) {\n        this.playing = true\n        this.$nextTick(() => {\n          if (Hls.isSupported()) {\n            let hls = new Hls();\n            hls.loadSource(this.playUrl)\n            hls.attachMedia(this.$refs.live)\n            this.hls = hls\n            hls.on(Hls.Events.MANIFEST_PARSED, () => {\n              // Load success.\n              this.$refs.live.play()\n            })\n            hls.on(Hls.Events.ERROR, () => {\n              // Error.\n            })\n          } else if (this.$refs.live.canPlayType('application/vnd.apple.mpegurl')) {\n            this.$refs.live.addEventListener('loadedmetadata', () => {\n              // Load success.\n              this.$refs.live.play()\n            })\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .hls-live {\n    background: #333;\n  }\n  .hls-live video {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n  .play-mask {\n    position: relative;\n    cursor: pointer;\n    color: #fff;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n  }\n  .play-tip {\n    position: absolute;\n    font-size: 18px;\n    top: 50%;\n    left: 50%;\n    margin: -38px -36px;\n  }\n  .play-icon {\n    padding-bottom: 5px;\n    font-size: 2em;\n    overflow: hidden;\n    border-radius: 100%;\n  }\n</style>\n"]}]}