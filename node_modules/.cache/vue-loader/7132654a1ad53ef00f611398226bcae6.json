{"remainingRequest":"E:\\yhc\\other\\open-root-other\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yhc\\other\\open-root-other\\src\\f-hls\\live\\Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\yhc\\other\\open-root-other\\src\\f-hls\\live\\Live.vue","mtime":1610444895859},{"path":"E:\\yhc\\other\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610444880938},{"path":"E:\\yhc\\other\\open-root-other\\node_modules\\babel-loader\\lib\\index.js","mtime":1610444879300},{"path":"E:\\yhc\\other\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610444880938},{"path":"E:\\yhc\\other\\open-root-other\\node_modules\\vue-loader\\lib\\index.js","mtime":1610444894606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSGxzIGZyb20gJ2hscy5qcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnTGl2ZScsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBsYXlpbmc6IGZhbHNlLA0KICAgICAgcGxheVVybDogJycsDQogICAgICBobHM6IG51bGwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy8gR2V0IGhscyBsaXZlIHVybCBmcm9tIHJvdXRlciBxdWVyeS4NCiAgICBsZXQgZW5jb2RlZEhsc1VybCA9IHRoaXMuJHJvdXRlci5jdXJyZW50Um91dGUucXVlcnkudXJsDQogICAgaWYgKHR5cGVvZiBlbmNvZGVkSGxzVXJsID09PSAnc3RyaW5nJyAmJiBlbmNvZGVkSGxzVXJsICE9PSAnJykgew0KICAgICAgdGhpcy5wbGF5VXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRIbHNVcmwpDQogICAgfQ0KICB9LA0KICBiZWZvcmVEZXN0cm95ICgpIHsNCiAgICBpZiAodGhpcy5wbGF5aW5nKSB7DQogICAgICB0aGlzLiRyZWZzLmxpdmUucGF1c2UoKQ0KICAgICAgdGhpcy5obHMuZGVzdHJveSgpDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZG9QbGF5ICgpIHsNCiAgICAgIGlmICh0aGlzLnBsYXlVcmwgPT09ICcnKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLnBsYXlpbmcpIHsNCiAgICAgICAgdGhpcy5wbGF5aW5nID0gdHJ1ZQ0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgaWYgKEhscy5pc1N1cHBvcnRlZCgpKSB7DQogICAgICAgICAgICBsZXQgaGxzID0gbmV3IEhscygpOw0KICAgICAgICAgICAgaGxzLmxvYWRTb3VyY2UodGhpcy5wbGF5VXJsKQ0KICAgICAgICAgICAgaGxzLmF0dGFjaE1lZGlhKHRoaXMuJHJlZnMubGl2ZSkNCiAgICAgICAgICAgIHRoaXMuaGxzID0gaGxzDQogICAgICAgICAgICBobHMub24oSGxzLkV2ZW50cy5NQU5JRkVTVF9QQVJTRUQsICgpID0+IHsNCiAgICAgICAgICAgICAgLy8gTG9hZCBzdWNjZXNzLg0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLmxpdmUucGxheSgpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgaGxzLm9uKEhscy5FdmVudHMuRVJST1IsICgpID0+IHsNCiAgICAgICAgICAgICAgLy8gRXJyb3IuDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy4kcmVmcy5saXZlLmNhblBsYXlUeXBlKCdhcHBsaWNhdGlvbi92bmQuYXBwbGUubXBlZ3VybCcpKSB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmxpdmUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCAoKSA9PiB7DQogICAgICAgICAgICAgIC8vIExvYWQgc3VjY2Vzcy4NCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5saXZlLnBsYXkoKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live.vue","sourceRoot":"src/f-hls/live","sourcesContent":["<template>\r\n  <div class=\"hls-live pin-wrap\">\r\n    <video v-if=\"playing\" ref=\"live\" autoplay :src=\"playUrl\" controls playsinline></video>\r\n    <div v-else class=\"play-mask\" @click=\"doPlay\">\r\n      <div class=\"play-tip\">\r\n        <div class=\"play-icon\"><v-icon name=\"play\" /></div>\r\n        <div class=\"play-text\">点击播放</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Hls from 'hls.js'\r\n\r\nexport default {\r\n  name: 'Live',\r\n  data() {\r\n    return {\r\n      playing: false,\r\n      playUrl: '',\r\n      hls: null\r\n    }\r\n  },\r\n  created() {\r\n    // Get hls live url from router query.\r\n    let encodedHlsUrl = this.$router.currentRoute.query.url\r\n    if (typeof encodedHlsUrl === 'string' && encodedHlsUrl !== '') {\r\n      this.playUrl = decodeURIComponent(encodedHlsUrl)\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    if (this.playing) {\r\n      this.$refs.live.pause()\r\n      this.hls.destroy()\r\n    }\r\n  },\r\n  methods: {\r\n    doPlay () {\r\n      if (this.playUrl === '') {\r\n        return\r\n      }\r\n      if (!this.playing) {\r\n        this.playing = true\r\n        this.$nextTick(() => {\r\n          if (Hls.isSupported()) {\r\n            let hls = new Hls();\r\n            hls.loadSource(this.playUrl)\r\n            hls.attachMedia(this.$refs.live)\r\n            this.hls = hls\r\n            hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n              // Load success.\r\n              this.$refs.live.play()\r\n            })\r\n            hls.on(Hls.Events.ERROR, () => {\r\n              // Error.\r\n            })\r\n          } else if (this.$refs.live.canPlayType('application/vnd.apple.mpegurl')) {\r\n            this.$refs.live.addEventListener('loadedmetadata', () => {\r\n              // Load success.\r\n              this.$refs.live.play()\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .hls-live {\r\n    background: #333;\r\n  }\r\n  .hls-live video {\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .play-mask {\r\n    position: relative;\r\n    cursor: pointer;\r\n    color: #fff;\r\n    text-align: center;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .play-tip {\r\n    position: absolute;\r\n    font-size: 18px;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin: -38px -36px;\r\n  }\r\n  .play-icon {\r\n    padding-bottom: 5px;\r\n    font-size: 2em;\r\n    overflow: hidden;\r\n    border-radius: 100%;\r\n  }\r\n</style>\r\n"]}]}