{"remainingRequest":"E:\\yhc\\open-root-other\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yhc\\open-root-other\\src\\f-hls\\live\\Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\yhc\\open-root-other\\src\\f-hls\\live\\Live.vue","mtime":1590488802151},{"path":"E:\\yhc\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIbHMgZnJvbSAnaGxzLmpzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMaXZlJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGxheWluZzogZmFsc2UsCiAgICAgIHBsYXlVcmw6ICcnLAogICAgICBobHM6IG51bGwKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyBHZXQgaGxzIGxpdmUgdXJsIGZyb20gcm91dGVyIHF1ZXJ5LgogICAgbGV0IGVuY29kZWRIbHNVcmwgPSB0aGlzLiRyb3V0ZXIuY3VycmVudFJvdXRlLnF1ZXJ5LnVybAogICAgaWYgKHR5cGVvZiBlbmNvZGVkSGxzVXJsID09PSAnc3RyaW5nJyAmJiBlbmNvZGVkSGxzVXJsICE9PSAnJykgewogICAgICB0aGlzLnBsYXlVcmwgPSBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZEhsc1VybCkKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3kgKCkgewogICAgaWYgKHRoaXMucGxheWluZykgewogICAgICB0aGlzLiRyZWZzLmxpdmUucGF1c2UoKQogICAgICB0aGlzLmhscy5kZXN0cm95KCkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGRvUGxheSAoKSB7CiAgICAgIGlmICh0aGlzLnBsYXlVcmwgPT09ICcnKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnBsYXlpbmcpIHsKICAgICAgICB0aGlzLnBsYXlpbmcgPSB0cnVlCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgaWYgKEhscy5pc1N1cHBvcnRlZCgpKSB7CiAgICAgICAgICAgIGxldCBobHMgPSBuZXcgSGxzKCk7CiAgICAgICAgICAgIGhscy5sb2FkU291cmNlKHRoaXMucGxheVVybCkKICAgICAgICAgICAgaGxzLmF0dGFjaE1lZGlhKHRoaXMuJHJlZnMubGl2ZSkKICAgICAgICAgICAgdGhpcy5obHMgPSBobHMKICAgICAgICAgICAgaGxzLm9uKEhscy5FdmVudHMuTUFOSUZFU1RfUEFSU0VELCAoKSA9PiB7CiAgICAgICAgICAgICAgLy8gTG9hZCBzdWNjZXNzLgogICAgICAgICAgICAgIHRoaXMuJHJlZnMubGl2ZS5wbGF5KCkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgaGxzLm9uKEhscy5FdmVudHMuRVJST1IsICgpID0+IHsKICAgICAgICAgICAgICAvLyBFcnJvci4KICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy4kcmVmcy5saXZlLmNhblBsYXlUeXBlKCdhcHBsaWNhdGlvbi92bmQuYXBwbGUubXBlZ3VybCcpKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMubGl2ZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsICgpID0+IHsKICAgICAgICAgICAgICAvLyBMb2FkIHN1Y2Nlc3MuCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5saXZlLnBsYXkoKQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live.vue","sourceRoot":"src/f-hls/live","sourcesContent":["<template>\n  <div class=\"hls-live pin-wrap\">\n    <video v-if=\"playing\" ref=\"live\" autoplay :src=\"playUrl\" controls playsinline></video>\n    <div v-else class=\"play-mask\" @click=\"doPlay\">\n      <div class=\"play-tip\">\n        <div class=\"play-icon\"><v-icon name=\"play\" /></div>\n        <div class=\"play-text\">点击播放</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Hls from 'hls.js'\n\nexport default {\n  name: 'Live',\n  data() {\n    return {\n      playing: false,\n      playUrl: '',\n      hls: null\n    }\n  },\n  created() {\n    // Get hls live url from router query.\n    let encodedHlsUrl = this.$router.currentRoute.query.url\n    if (typeof encodedHlsUrl === 'string' && encodedHlsUrl !== '') {\n      this.playUrl = decodeURIComponent(encodedHlsUrl)\n    }\n  },\n  beforeDestroy () {\n    if (this.playing) {\n      this.$refs.live.pause()\n      this.hls.destroy()\n    }\n  },\n  methods: {\n    doPlay () {\n      if (this.playUrl === '') {\n        return\n      }\n      if (!this.playing) {\n        this.playing = true\n        this.$nextTick(() => {\n          if (Hls.isSupported()) {\n            let hls = new Hls();\n            hls.loadSource(this.playUrl)\n            hls.attachMedia(this.$refs.live)\n            this.hls = hls\n            hls.on(Hls.Events.MANIFEST_PARSED, () => {\n              // Load success.\n              this.$refs.live.play()\n            })\n            hls.on(Hls.Events.ERROR, () => {\n              // Error.\n            })\n          } else if (this.$refs.live.canPlayType('application/vnd.apple.mpegurl')) {\n            this.$refs.live.addEventListener('loadedmetadata', () => {\n              // Load success.\n              this.$refs.live.play()\n            })\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .hls-live {\n    background: #333;\n  }\n  .hls-live video {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n  .play-mask {\n    position: relative;\n    cursor: pointer;\n    color: #fff;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n  }\n  .play-tip {\n    position: absolute;\n    font-size: 18px;\n    top: 50%;\n    left: 50%;\n    margin: -38px -36px;\n  }\n  .play-icon {\n    padding-bottom: 5px;\n    font-size: 2em;\n    overflow: hidden;\n    border-radius: 100%;\n  }\n</style>\n"]}]}