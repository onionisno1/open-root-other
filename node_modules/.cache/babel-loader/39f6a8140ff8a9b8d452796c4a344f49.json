{"remainingRequest":"E:\\yhc\\open-root-other\\node_modules\\babel-loader\\lib\\index.js!E:\\yhc\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\yhc\\open-root-other\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\yhc\\open-root-other\\src\\f-hls\\live\\Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\yhc\\open-root-other\\src\\f-hls\\live\\Live.vue","mtime":1590488802151},{"path":"E:\\yhc\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\yhc\\open-root-other\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhscyBmcm9tICdobHMuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xpdmUnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwbGF5aW5nOiBmYWxzZSwKICAgICAgcGxheVVybDogJycsCiAgICAgIGhsczogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyBHZXQgaGxzIGxpdmUgdXJsIGZyb20gcm91dGVyIHF1ZXJ5LgogICAgdmFyIGVuY29kZWRIbHNVcmwgPSB0aGlzLiRyb3V0ZXIuY3VycmVudFJvdXRlLnF1ZXJ5LnVybDsKCiAgICBpZiAodHlwZW9mIGVuY29kZWRIbHNVcmwgPT09ICdzdHJpbmcnICYmIGVuY29kZWRIbHNVcmwgIT09ICcnKSB7CiAgICAgIHRoaXMucGxheVVybCA9IGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkSGxzVXJsKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAodGhpcy5wbGF5aW5nKSB7CiAgICAgIHRoaXMuJHJlZnMubGl2ZS5wYXVzZSgpOwogICAgICB0aGlzLmhscy5kZXN0cm95KCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkb1BsYXk6IGZ1bmN0aW9uIGRvUGxheSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnBsYXlVcmwgPT09ICcnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXRoaXMucGxheWluZykgewogICAgICAgIHRoaXMucGxheWluZyA9IHRydWU7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKEhscy5pc1N1cHBvcnRlZCgpKSB7CiAgICAgICAgICAgIHZhciBobHMgPSBuZXcgSGxzKCk7CiAgICAgICAgICAgIGhscy5sb2FkU291cmNlKF90aGlzLnBsYXlVcmwpOwogICAgICAgICAgICBobHMuYXR0YWNoTWVkaWEoX3RoaXMuJHJlZnMubGl2ZSk7CiAgICAgICAgICAgIF90aGlzLmhscyA9IGhsczsKICAgICAgICAgICAgaGxzLm9uKEhscy5FdmVudHMuTUFOSUZFU1RfUEFSU0VELCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgLy8gTG9hZCBzdWNjZXNzLgogICAgICAgICAgICAgIF90aGlzLiRyZWZzLmxpdmUucGxheSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaGxzLm9uKEhscy5FdmVudHMuRVJST1IsIGZ1bmN0aW9uICgpIHsvLyBFcnJvci4KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLiRyZWZzLmxpdmUuY2FuUGxheVR5cGUoJ2FwcGxpY2F0aW9uL3ZuZC5hcHBsZS5tcGVndXJsJykpIHsKICAgICAgICAgICAgX3RoaXMuJHJlZnMubGl2ZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBMb2FkIHN1Y2Nlc3MuCiAgICAgICAgICAgICAgX3RoaXMuJHJlZnMubGl2ZS5wbGF5KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;AAaA,OAAA,GAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,GAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AACA;AACA,QAAA,aAAA,GAAA,KAAA,OAAA,CAAA,YAAA,CAAA,KAAA,CAAA,GAAA;;AACA,QAAA,OAAA,aAAA,KAAA,QAAA,IAAA,aAAA,KAAA,EAAA,EAAA;AACA,WAAA,OAAA,GAAA,kBAAA,CAAA,aAAA,CAAA;AACA;AACA,GAfA;AAgBA,EAAA,aAhBA,2BAgBA;AACA,QAAA,KAAA,OAAA,EAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,KAAA;AACA,WAAA,GAAA,CAAA,OAAA;AACA;AACA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA,UAAA,KAAA,OAAA,KAAA,EAAA,EAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,SAAA,CAAA,YAAA;AACA,cAAA,GAAA,CAAA,WAAA,EAAA,EAAA;AACA,gBAAA,GAAA,GAAA,IAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,UAAA,CAAA,KAAA,CAAA,OAAA;AACA,YAAA,GAAA,CAAA,WAAA,CAAA,KAAA,CAAA,KAAA,CAAA,IAAA;AACA,YAAA,KAAA,CAAA,GAAA,GAAA,GAAA;AACA,YAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,MAAA,CAAA,eAAA,EAAA,YAAA;AACA;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA,aAHA;AAIA,YAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,EAAA,YAAA,CACA;AACA,aAFA;AAGA,WAZA,MAYA,IAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA,CAAA,+BAAA,CAAA,EAAA;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,gBAAA,CAAA,gBAAA,EAAA,YAAA;AACA;AACA,cAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA,aAHA;AAIA;AACA,SAnBA;AAoBA;AACA;AA5BA;AAtBA,CAAA","sourcesContent":["<template>\n  <div class=\"hls-live pin-wrap\">\n    <video v-if=\"playing\" ref=\"live\" autoplay :src=\"playUrl\" controls playsinline></video>\n    <div v-else class=\"play-mask\" @click=\"doPlay\">\n      <div class=\"play-tip\">\n        <div class=\"play-icon\"><v-icon name=\"play\" /></div>\n        <div class=\"play-text\">点击播放</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Hls from 'hls.js'\n\nexport default {\n  name: 'Live',\n  data() {\n    return {\n      playing: false,\n      playUrl: '',\n      hls: null\n    }\n  },\n  created() {\n    // Get hls live url from router query.\n    let encodedHlsUrl = this.$router.currentRoute.query.url\n    if (typeof encodedHlsUrl === 'string' && encodedHlsUrl !== '') {\n      this.playUrl = decodeURIComponent(encodedHlsUrl)\n    }\n  },\n  beforeDestroy () {\n    if (this.playing) {\n      this.$refs.live.pause()\n      this.hls.destroy()\n    }\n  },\n  methods: {\n    doPlay () {\n      if (this.playUrl === '') {\n        return\n      }\n      if (!this.playing) {\n        this.playing = true\n        this.$nextTick(() => {\n          if (Hls.isSupported()) {\n            let hls = new Hls();\n            hls.loadSource(this.playUrl)\n            hls.attachMedia(this.$refs.live)\n            this.hls = hls\n            hls.on(Hls.Events.MANIFEST_PARSED, () => {\n              // Load success.\n              this.$refs.live.play()\n            })\n            hls.on(Hls.Events.ERROR, () => {\n              // Error.\n            })\n          } else if (this.$refs.live.canPlayType('application/vnd.apple.mpegurl')) {\n            this.$refs.live.addEventListener('loadedmetadata', () => {\n              // Load success.\n              this.$refs.live.play()\n            })\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .hls-live {\n    background: #333;\n  }\n  .hls-live video {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n  .play-mask {\n    position: relative;\n    cursor: pointer;\n    color: #fff;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n  }\n  .play-tip {\n    position: absolute;\n    font-size: 18px;\n    top: 50%;\n    left: 50%;\n    margin: -38px -36px;\n  }\n  .play-icon {\n    padding-bottom: 5px;\n    font-size: 2em;\n    overflow: hidden;\n    border-radius: 100%;\n  }\n</style>\n"],"sourceRoot":"src/f-hls/live"}]}